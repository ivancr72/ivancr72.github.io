<!DOCTYPE html>
<html lang=en>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" href="/selaere.png">
        <link rel="stylesheet" type="text/css" href="/epic.css"/>
        <title>pride flag generator</title>
        <style>
            html, body {
                height: 100%;
                box-sizing: border-box;
            }
        </style>
        <script>
            function rng(start, stop) {
                return Math.floor(Math.random() * (stop+1-start)) + start;
            }
            function commence() {
                const canvas = document.getElementById('canvas');
                canvas.width = document.body.clientWidth - 40;
                canvas.height = document.body.clientHeight - 40;
                const ctx = canvas.getContext('2d');
                const reflected = rng(0, 1);
                const stripes = rng(3, 7);
                let colors = [];
                for (let i = 0; i < stripes; i++) {
                    const a = rng(1, 10)
                    if (a >= 4) {
                        ctx.fillStyle = `hsl(${rng(0, 17)*20}deg, 100%, ${rng(0,1)*25+50}%)`;
                    } else if (a >= 2) {
                        ctx.fillStyle = `hsl(0deg, 0%, ${rng(0,4)*25}%)`;
                    }

                    if (reflected) {
                        if (i+0.5 > stripes/2) {
                            ctx.fillStyle = colors.pop()
                        } else if (i+0.5 < stripes/2) {
                            colors.push(ctx.fillStyle)
                        }
                    }
                    ctx.fillRect(0, Math.floor(canvas.height/stripes*i), canvas.width, Math.ceil(canvas.height/stripes))
                    
                }

                /*
                let color = 0
                let [lastx, lasty] = [null, null];
                canvas.addEventListener('mousemove', function(e) {
                    color++;
                    ctx.fillStyle = `hsl(${color%360}deg, 100%, 50%)`;
                    ctx.strokeStyle = `hsl(${color%360}deg, 100%, 50%)`;
                    ctx.lineWidth = 5
                    if (lastx !== null) {
                        ctx.beginPath();
                        ctx.moveTo(lastx, lasty)
                        ctx.lineTo(e.offsetX, e.offsetY);
                        ctx.stroke();
                    }
                    [lastx, lasty] = [e.offsetX, e.offsetY]
                    ctx.beginPath();
                    ctx.arc(e.offsetX, e.offsetY, 5, 0, 2 * Math.PI);
                    ctx.fill();
                }, false);*/
            }
        </script>

    </head>
    <body onload=commence()>
        <canvas id=canvas onclick=commence()></canvas>
    </body>
</html>